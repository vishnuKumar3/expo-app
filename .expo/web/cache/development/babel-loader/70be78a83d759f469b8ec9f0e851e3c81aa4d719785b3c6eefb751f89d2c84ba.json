{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport NativeEventEmitter from \"react-native-web/dist/exports/NativeEventEmitter\";\nimport NativeModules from \"react-native-web/dist/exports/NativeModules\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { useEffect, useState } from 'react';\nvar LINKING_ERROR = \"The package 'react-native-otp-verify' doesn't seem to be linked. Make sure: \\n\\n\" + Platform.select({\n  ios: \"- You have run 'pod install'\\n\",\n  default: ''\n}) + '- You rebuilt the app after installing the package\\n' + '- You are not using Expo managed workflow\\n';\nvar RNOtpVerify = NativeModules.OtpVerify ? NativeModules.OtpVerify : new Proxy({}, {\n  get: function get() {\n    throw new Error(LINKING_ERROR);\n  }\n});\nvar eventEmitter = new NativeEventEmitter(RNOtpVerify);\nexport function getOtp() {\n  return _getOtp.apply(this, arguments);\n}\nfunction _getOtp() {\n  _getOtp = _asyncToGenerator(function* () {\n    if (Platform.OS === 'ios') {\n      console.warn('Not Supported on iOS');\n      return false;\n    }\n    return RNOtpVerify.getOtp();\n  });\n  return _getOtp.apply(this, arguments);\n}\nexport function startOtpListener(handler) {\n  return getOtp().then(function () {\n    return addListener(handler);\n  });\n}\nexport var useOtpVerify = function useOtpVerify() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      numberOfDigits: 0\n    },\n    numberOfDigits = _ref.numberOfDigits;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    message = _useState2[0],\n    setMessage = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    otp = _useState4[0],\n    setOtp = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    timeoutError = _useState6[0],\n    setTimeoutError = _useState6[1];\n  var _useState7 = useState([]),\n    _useState8 = _slicedToArray(_useState7, 2),\n    hash = _useState8[0],\n    setHash = _useState8[1];\n  var handleMessage = function handleMessage(response) {\n    if (response === 'Timeout Error.') {\n      setTimeoutError(true);\n    } else {\n      setMessage(response);\n      if (numberOfDigits && response) {\n        var otpDigits = new RegExp(\"(\\\\d{\" + numberOfDigits + \"})\", 'g').exec(response);\n        if (otpDigits && otpDigits[1]) setOtp(otpDigits[1]);\n      }\n    }\n  };\n  useEffect(function () {\n    if (Platform.OS === 'ios') {\n      console.warn('Not Supported on iOS');\n      return;\n    }\n    getHash().then(setHash);\n    startOtpListener(handleMessage);\n    return function () {\n      removeListener();\n    };\n  }, []);\n  var startListener = function startListener() {\n    if (Platform.OS === 'ios') {\n      console.warn('Not Supported on iOS');\n      return;\n    }\n    setOtp('');\n    setMessage('');\n    startOtpListener(handleMessage);\n  };\n  var stopListener = function stopListener() {\n    if (Platform.OS === 'ios') {\n      console.warn('Not Supported on iOS');\n      return;\n    }\n    removeListener();\n  };\n  return {\n    otp: otp,\n    message: message,\n    hash: hash,\n    timeoutError: timeoutError,\n    stopListener: stopListener,\n    startListener: startListener\n  };\n};\nexport function getHash() {\n  return _getHash.apply(this, arguments);\n}\nfunction _getHash() {\n  _getHash = _asyncToGenerator(function* () {\n    if (Platform.OS === 'ios') {\n      console.warn('Not Supported on iOS');\n      return [];\n    }\n    return RNOtpVerify.getHash();\n  });\n  return _getHash.apply(this, arguments);\n}\nexport function requestHint() {\n  return _requestHint.apply(this, arguments);\n}\nfunction _requestHint() {\n  _requestHint = _asyncToGenerator(function* () {\n    if (Platform.OS === 'ios') {\n      console.warn('Not Supported on iOS');\n      return '';\n    }\n    return RNOtpVerify.requestHint();\n  });\n  return _requestHint.apply(this, arguments);\n}\nexport function addListener(handler) {\n  return eventEmitter.addListener('com.faizalshap.otpVerify:otpReceived', handler);\n}\nexport function removeListener() {\n  return eventEmitter.removeAllListeners('com.faizalshap.otpVerify:otpReceived');\n}\nvar OtpVerify = {\n  getOtp: getOtp,\n  getHash: getHash,\n  addListener: addListener,\n  removeListener: removeListener,\n  startOtpListener: startOtpListener,\n  requestHint: requestHint\n};\nexport default OtpVerify;","map":{"version":3,"names":["useEffect","useState","LINKING_ERROR","Platform","select","ios","default","RNOtpVerify","NativeModules","OtpVerify","Proxy","get","Error","eventEmitter","NativeEventEmitter","getOtp","_getOtp","apply","arguments","_asyncToGenerator","OS","console","warn","startOtpListener","handler","then","addListener","useOtpVerify","_ref","length","undefined","numberOfDigits","_useState","_useState2","_slicedToArray","message","setMessage","_useState3","_useState4","otp","setOtp","_useState5","_useState6","timeoutError","setTimeoutError","_useState7","_useState8","hash","setHash","handleMessage","response","otpDigits","RegExp","exec","getHash","removeListener","startListener","stopListener","_getHash","requestHint","_requestHint","removeAllListeners"],"sources":["C:\\Users\\naray\\Videos\\expoReactNative\\node_modules\\react-native-otp-verify\\lib\\module\\index.tsx"],"sourcesContent":["import { NativeEventEmitter, NativeModules, Platform } from 'react-native';\nimport { useEffect, useState } from 'react';\n\nconst LINKING_ERROR =\n  `The package 'react-native-otp-verify' doesn't seem to be linked. Make sure: \\n\\n` +\n  Platform.select({ ios: \"- You have run 'pod install'\\n\", default: '' }) +\n  '- You rebuilt the app after installing the package\\n' +\n  '- You are not using Expo managed workflow\\n';\n\nconst RNOtpVerify = NativeModules.OtpVerify\n  ? NativeModules.OtpVerify\n  : new Proxy(\n      {},\n      {\n        get() {\n          throw new Error(LINKING_ERROR);\n        },\n      }\n    );\n\nconst eventEmitter = new NativeEventEmitter(RNOtpVerify);\n\ninterface OtpVerify {\n  getOtp: () => Promise<boolean>;\n  getHash: () => Promise<string[]>;\n  requestHint: () => Promise<string>;\n  startOtpListener: (\n    handler: (value: string) => any\n  ) => Promise<import('react-native').EmitterSubscription>;\n  addListener: (\n    handler: (value: string) => any\n  ) => import('react-native').EmitterSubscription;\n  removeListener: () => void;\n}\n\nexport async function getOtp(): Promise<boolean> {\n  if (Platform.OS === 'ios') {\n    console.warn('Not Supported on iOS');\n    return false;\n  }\n  return RNOtpVerify.getOtp();\n}\n\nexport function startOtpListener(\n  handler: (value: string) => any\n): Promise<import('react-native').EmitterSubscription> {\n  return getOtp().then(() => addListener(handler));\n}\n\nexport const useOtpVerify = ({ numberOfDigits } = { numberOfDigits: 0 }) => {\n  const [message, setMessage] = useState<string | null>(null);\n  const [otp, setOtp] = useState<string | null>(null);\n  const [timeoutError, setTimeoutError] = useState<boolean>(false);\n  const [hash, setHash] = useState<string[] | null>([]);\n\n  const handleMessage = (response: string) => {\n    if (response === 'Timeout Error.') {\n      setTimeoutError(true);\n    } else {\n      setMessage(response);\n      if (numberOfDigits && response) {\n        const otpDigits = new RegExp(`(\\\\d{${numberOfDigits}})`, 'g').exec(response);\n        if (otpDigits && otpDigits[1]) setOtp(otpDigits[1]);\n      }\n    }\n  };\n  useEffect(() => {\n    if (Platform.OS === 'ios') {\n      console.warn('Not Supported on iOS');\n      return;\n    }\n    getHash().then(setHash);\n    startOtpListener(handleMessage);\n    return () => {\n      removeListener();\n    };\n  }, []);\n  const startListener = () => {\n    if (Platform.OS === 'ios') {\n      console.warn('Not Supported on iOS');\n      return;\n    }\n    setOtp('');\n    setMessage('');\n    startOtpListener(handleMessage);\n  };\n  const stopListener = () => {\n    if (Platform.OS === 'ios') {\n      console.warn('Not Supported on iOS');\n      return;\n    }\n    removeListener();\n  };\n  return { otp, message, hash, timeoutError, stopListener, startListener };\n};\n\nexport async function getHash(): Promise<string[]> {\n  if (Platform.OS === 'ios') {\n    console.warn('Not Supported on iOS');\n    return [];\n  }\n  return RNOtpVerify.getHash();\n}\nexport async function requestHint(): Promise<string> {\n  if (Platform.OS === 'ios') {\n    console.warn('Not Supported on iOS');\n    return '';\n  }\n  return RNOtpVerify.requestHint();\n}\n\nexport function addListener(\n  handler: (value: string) => any\n): import('react-native').EmitterSubscription {\n  return eventEmitter.addListener(\n    'com.faizalshap.otpVerify:otpReceived',\n    handler\n  );\n}\n\nexport function removeListener(): void {\n  return eventEmitter.removeAllListeners(\n    'com.faizalshap.otpVerify:otpReceived'\n  );\n}\n\nconst OtpVerify: OtpVerify = {\n  getOtp,\n  getHash,\n  addListener,\n  removeListener,\n  startOtpListener,\n  requestHint,\n};\n\nexport default OtpVerify;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}